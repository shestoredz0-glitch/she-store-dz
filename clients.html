<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>she.store_dz - Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±</title>

<style>
  body{
    font-family: Arial, sans-serif;
    background:#fde4ef;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    margin:0;
  }
  .card{
    background:#fff;
    padding:22px;
    border-radius:14px;
    width:340px;
    box-shadow:0 10px 25px rgba(0,0,0,.10);
    text-align:right;
  }
  h2{
    text-align:center;
    color:#e91e63;
    margin: 6px 0 16px;
    font-size:20px;
    font-weight:700;
  }
  label{
    display:block;
    margin-top:12px;
    font-size:14px;
    color:#333;
  }
  input{
    width:100%;
    padding:10px;
    margin-top:6px;
    border:1px solid #ccc;
    border-radius:8px;
    outline:none;
    font-size:14px;
    box-sizing:border-box;
  }
  input:focus{
    border-color:#e91e63;
    box-shadow:0 0 0 3px rgba(233,30,99,.12);
  }
  .result{
    margin-top:16px;
    background:#f8bbd0;
    padding:12px;
    border-radius:10px;
    text-align:center;
    font-weight:700;
    color:#111;
    font-size:16px;
  }
  .hint{
    margin-top:10px;
    text-align:center;
    color:#666;
    font-size:12px;
  }
  .thanks{
    margin-top:14px;
    text-align:center;
    color:#e91e63;
    font-size:14px;
    font-weight:700;
  }
</style>
</head>

<body>
  <div class="card">
    <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ she.store_dz</h2>

    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</label>
    <input type="number" id="products" value="1" min="1" inputmode="numeric" />

    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ (Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ)</label>
    <input type="number" id="pieces" value="1" min="1" inputmode="numeric" />

    <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($)</label>
    <input type="number" id="usd" step="0.01" min="0" placeholder="Ù…Ø«Ø§Ù„: 4.48" inputmode="decimal" />

    <div class="result" id="result">Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø§Ø´ ÙŠØ¨Ø§Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>

    <div class="thanks">Ø´ÙƒØ±Ø§Ù‹ ÙŠØ§ Ø³ÙÙƒØ±Ø© Ù„Ø²ÙŠØ§Ø±ØªÙƒ ğŸ’—</div>
  </div>

<script>
  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø¨Ø­
  const RATE_DZD = 260;           // 1$ = 260 Ø¯Ø¬ (Ù„Ù„Ø²Ø¨Ø§Ø¦Ù†)
  const PER_PRODUCT_FEE = 100;    // 100 Ø¯Ø¬ Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ù†ØªØ¬
  const PER_EXTRA_PIECE = 50;     // 50 Ø¯Ø¬ Ø¹Ù„Ù‰ ÙƒÙ„ Ù‚Ø·Ø¹Ø© Ø²Ø§ÙŠØ¯Ø©

  const elProducts = document.getElementById("products");
  const elPieces   = document.getElementById("pieces");
  const elUsd      = document.getElementById("usd");
  const elResult   = document.getElementById("result");

  function safeInt(v, fallback){
    const n = parseInt(v, 10);
    return Number.isFinite(n) ? n : fallback;
  }
  function safeFloat(v){
    // Ù†Ù‚Ø¨Ù„Ùˆ Ø§Ù„ÙØ§ØµÙ„Ø© ÙˆÙ„Ø§ Ø§Ù„Ù†Ù‚Ø·Ø©
    const cleaned = (v || "").toString().replace(",", ".");
    const n = parseFloat(cleaned);
    return Number.isFinite(n) ? n : null;
  }

  function calcAuto(){
    const products = Math.max(1, safeInt(elProducts.value, 1));
    const pieces   = Math.max(1, safeInt(elPieces.value, 1));
    const usd      = safeFloat(elUsd.value);

    // Ù†ØµÙ„Ø­Ùˆ Ø§Ù„Ù‚ÙŠÙ… ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø£Ù‚Ù„ Ù…Ù† 1
    if (parseInt(elProducts.value,10) !== products) elProducts.value = products;
    if (parseInt(elPieces.value,10) !== pieces) elPieces.value = pieces;

    if (usd === null){
      elResult.textContent = "Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø¨Ø§Ø´ Ù†Ø®Ø±Ø¬ÙˆÙ„Ùƒ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±";
      return;
    }

    // Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±
    const baseDzd = usd * RATE_DZD;

    // Ø±Ø¨Ø­Ùƒ (Ù…Ø¶Ø§Ù Ù„Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ)
    const feeProducts = products * PER_PRODUCT_FEE;
    const extraPieces = Math.max(0, pieces - products);
    const feePieces   = extraPieces * PER_EXTRA_PIECE;

    const finalDzd = baseDzd + feeProducts + feePieces;

    elResult.textContent = "Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: " + Math.round(finalDzd) + " Ø¯Ø¬";
  }

  // Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹ ÙƒÙ„ ØªØºÙŠÙŠØ±
  ["input","change"].forEach(evt=>{
    elProducts.addEventListener(evt, calcAuto);
    elPieces.addEventListener(evt, calcAuto);
    elUsd.addEventListener(evt, calcAuto);
  });

  // Ø£ÙˆÙ„ Ø­Ø³Ø§Ø¨
  calcAuto();
</script>
</body>
</html>
